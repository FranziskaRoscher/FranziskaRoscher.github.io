dep.var.labels=c("Gender Gap in Turnout (in \\%)"),
digits=3, df=F,
omit=c("Constant"),
align=TRUE, no.space = TRUE,
column.sep.width = "-15pt")
stargazer(mod04d,mod04e,mod04f,
title = "Table A3. Regression Results for Excess Male Migration",
type = "text", out = "migrationnssa3.tex",
covariate.labels=c("\\% Excess Male Migrant HHs","Avg. Monthly HH Expenditure (INR)","\\% HHs Urban","FLFP Rate","Sex Ratio","Log(Population)","\\% HHs Muslim","\\% HHs Other Religion","\\% HHs SC", "\\% HHs ST","\\% HHs OBC"),
dep.var.labels=c("Gender Gap in Turnout (in \\%)"),
digits=3, df=F,
omit=c("Constant"),
align=TRUE, no.space = TRUE,
column.sep.width = "-15pt")
stargazer(mod05d,mod05e,mod05f,
title = "Table A4. Regression Results for Excess Male Labor Migration",
type = "text", out = "migrationnssa4.tex",
covariate.labels=c("\\% Excess Male Labor Migrant HHs","Avg. Monthly HH Expenditure (INR)","\\% HHs Urban","FLFP Rate","Sex Ratio","Log(Population)","\\% HHs Muslim","\\% HHs Other Religion","\\% HHs SC", "\\% HHs ST","\\% HHs OBC"),
dep.var.labels=c("Gender Gap in Turnout (in \\%)"),
digits=3, df=F,
omit=c("Constant"),
align=TRUE, no.space = TRUE,
column.sep.width = "-15pt")
#for appendix:
stargazer(mod02d,mod02e,mod02f,
title = "Table A1. Regression Results for Male Migration",
type = "text", out = "migrationnssa1.tex",
covariate.labels=c("\\% Male Migrant HHs","Male Employment Rate","\\% HHs Urban","FLFP Rate","Sex Ratio","Log(Population)","\\% HHs Muslim","\\% HHs Other Religion","\\% HHs SC", "\\% HHs ST","\\% HHs OBC"),
dep.var.labels=c("Gender Gap in Turnout (in \\%)"),
digits=3, df=F,
omit=c("Constant"),
align=TRUE, no.space = TRUE,
column.sep.width = "-15pt")
stargazer(mod03d,mod03e,mod03f,
title = "Table A2. Regression Results for Male Labor Migration",
type = "text", out = "migrationnssa2.tex",
covariate.labels=c("\\% Male Labor Migrant HHs","Male Employment Rate","\\% HHs Urban","FLFP Rate","Sex Ratio","Log(Population)","\\% HHs Muslim","\\% HHs Other Religion","\\% HHs SC", "\\% HHs ST","\\% HHs OBC"),
dep.var.labels=c("Gender Gap in Turnout (in \\%)"),
digits=3, df=F,
omit=c("Constant"),
align=TRUE, no.space = TRUE,
column.sep.width = "-15pt")
stargazer(mod04d,mod04e,mod04f,
title = "Table A3. Regression Results for Excess Male Migration",
type = "text", out = "migrationnssa3.tex",
covariate.labels=c("\\% Excess Male Migrant HHs","Male Employment Rate","\\% HHs Urban","FLFP Rate","Sex Ratio","Log(Population)","\\% HHs Muslim","\\% HHs Other Religion","\\% HHs SC", "\\% HHs ST","\\% HHs OBC"),
dep.var.labels=c("Gender Gap in Turnout (in \\%)"),
digits=3, df=F,
omit=c("Constant"),
align=TRUE, no.space = TRUE,
column.sep.width = "-15pt")
stargazer(mod05d,mod05e,mod05f,
title = "Table A4. Regression Results for Excess Male Labor Migration",
type = "text", out = "migrationnssa4.tex",
covariate.labels=c("\\% Excess Male Labor Migrant HHs","Male Employment Rate","\\% HHs Urban","FLFP Rate","Sex Ratio","Log(Population)","\\% HHs Muslim","\\% HHs Other Religion","\\% HHs SC", "\\% HHs ST","\\% HHs OBC"),
dep.var.labels=c("Gender Gap in Turnout (in \\%)"),
digits=3, df=F,
omit=c("Constant"),
align=TRUE, no.space = TRUE,
column.sep.width = "-15pt")
agriculture <- svyby(~f_al+f_cl+f_ff+f_ag, ~migranthh.labor, nss,na.rm = TRUE, svymean)
View(agriculture)
for (i in 2:5){
agriculture[,i] <- round(agriculture[,i]*100,digits=2)
}
agriculture <- data.frame(t(agriculture[,c(1:5)]))
agriculture$vars <- rownames(agriculture)
agriculture <- agriculture[-1,c(3,1,2)]
agriculture$pvalue <- 0
for (i in 1:length(agriculture$vars)){
v <- agriculture$vars[i]
test <- svyttest(v~migranthh.labor,nss)
agriculture$pvalue[i] <- round(test$p.value,4)
}
for (i in 1:length(agriculture$vars)){
test <- svyttest(agriculture$vars[i]~migranthh.labor,nss)
agriculture$pvalue[i] <- round(test$p.value,4)
}
agriculture$vars[i]
for (i in 1:length(agriculture$vars)){
v <- agriculture$vars[i]
test <- svyttest(nss64[,v]~migranthh.labor,nss)
agriculture$pvalue[i] <- round(test$p.value,4)
}
nss64[,v]
test1 <- svyttest(f_al~migranthh.labor,nss)
agriculture <- svyby(~f_ag+f_al+f_cl, ~migranthh.labor, nss,na.rm = TRUE, svymean)
for (i in 2:4){
agriculture[,i] <- round(agriculture[,i]*100,digits=2)
}
agriculture <- data.frame(t(agriculture[,c(1:4)]))
agriculture$vars <- rownames(agriculture)
agriculture <- agriculture[-1,c(3,1,2)]
agriculture$pvalue <- 0
test1 <- svyttest(f_ag~migranthh.labor,nss)
test2 <- svyttest(f_al~migranthh.labor,nss)
test3 <- svyttest(f_cl~migranthh.labor,nss)
pvs <- rbind(test1$p.value,test2$p.value,test3$p.value)
agriculture <- cbind(agriculture,pvs)
agriculture <- agriculture[,-3]
agriculture <- svyby(~f_ag+f_al+f_cl, ~migranthh.labor, nss,na.rm = TRUE, svymean)
for (i in 2:4){
agriculture[,i] <- round(agriculture[,i]*100,digits=2)
}
agriculture <- data.frame(t(agriculture[,c(1:4)]))
agriculture$vars <- rownames(agriculture)
agriculture <- agriculture[-1,c(3,1,2)]
agriculture <- cbind(agriculture,pvs)
agriculture$vars <- c("Any Agriculture","Agricultural Laborer","Cultivator")
agriculture$vars <- c("Share HHs w/ Agriculture","Share HHs w/ Agricultural Laborer","Share HHs w/ Cultivator")
colnames(agriculture) <- c("Type","Non-Migrant HHs","Migrant HHs", "p value")
rownames(agriculture) <- NULL
print(xtable(agriculture,caption="Table 8. Share of Households with at Least 1 Woman Engaged in Agriculture",align="llrrr",digits=2),caption.placement="top",table.placement="!htbp",include.rownames=F,booktab=T,file="agrinssnationallevel.tex")
agriculture$vars <- c("Any Agriculture","Agricultural Laborer","Cultivator")
print(xtable(agriculture,caption="Table 8. Share of Households with at Least 1 Woman Engaged in Agriculture",align="llrrr",digits=2),caption.placement="top",table.placement="!htbp",include.rownames=F,booktab=T,file="agrinssnationallevel.tex")
#share of HHs with at least 1 woman engaged in agriculture
agriculture <- svyby(~f_ag+f_al+f_cl, ~migranthh.labor, nss,na.rm = TRUE, svymean)
for (i in 2:4){
agriculture[,i] <- round(agriculture[,i]*100,digits=2)
}
agriculture <- data.frame(t(agriculture[,c(1:4)]))
agriculture$vars <- c("Any Agriculture","Agricultural Laborer","Cultivator")
agriculture <- agriculture[-1,c(3,1,2)]
test1 <- svyttest(f_ag~migranthh.labor,nss)
test2 <- svyttest(f_al~migranthh.labor,nss)
test3 <- svyttest(f_cl~migranthh.labor,nss)
pvs <- rbind(test1$p.value,test2$p.value,test3$p.value)
agriculture <- cbind(agriculture,pvs)
colnames(agriculture) <- c("Type","Non-Migrant HHs","Migrant HHs", "p value")
rownames(agriculture) <- NULL
print(xtable(agriculture,caption="Table 8. Share of Households with at Least 1 Woman Engaged in Agriculture",align="llrrr",digits=2),caption.placement="top",table.placement="!htbp",include.rownames=F,booktab=T,file="agrinssnationallevel.tex")
#share of HHs with at least 1 woman engaged in agriculture
agriculture <- svyby(~f_ag+f_al+f_cl, ~migranthh.labor, nss,na.rm = TRUE, svymean)
for (i in 2:4){
agriculture[,i] <- round(agriculture[,i]*100,digits=2)
}
agriculture <- data.frame(t(agriculture[,c(1:4)]))
agriculture$vars <- c("Any Agriculture","Agricultural Laborer","Cultivator")
#share of HHs with at least 1 woman engaged in agriculture
agriculture <- svyby(~f_ag+f_al+f_cl, ~migranthh.labor, nss,na.rm = TRUE, svymean)
for (i in 2:4){
agriculture[,i] <- round(agriculture[,i]*100,digits=2)
}
agriculture <- data.frame(t(agriculture[,c(2:4)]))
agriculture$vars <- c("Any Agriculture","Agricultural Laborer","Cultivator")
agriculture <- agriculture[,c(3,1,2)]
test1 <- svyttest(f_ag~migranthh.labor,nss)
test2 <- svyttest(f_al~migranthh.labor,nss)
test3 <- svyttest(f_cl~migranthh.labor,nss)
pvs <- rbind(test1$p.value,test2$p.value,test3$p.value)
agriculture <- cbind(agriculture,pvs)
colnames(agriculture) <- c("Type","Non-Migrant HHs","Migrant HHs", "p value")
rownames(agriculture) <- NULL
print(xtable(agriculture,caption="Table 8. Share of Households with at Least 1 Woman Engaged in Agriculture",align="llrrr",digits=2),caption.placement="top",table.placement="!htbp",include.rownames=F,booktab=T,file="agrinssnationallevel.tex")
# at the state level
agri <- svyby(~f_ag+f_al+f_cl, ~state+migranthh.labor, nss,na.rm = TRUE, svymean)
colnames(agriculture) <- c("Type of Activity","Non-Migrant HHs","Migrant HHs", "p value")
print(xtable(agriculture,caption="Table 8. Share of Households with at Least 1 Woman Engaged in Agriculture",align="llrrr",digits=2),caption.placement="top",table.placement="!htbp",include.rownames=F,booktab=T,file="agrinssnationallevel.tex")
View(agri)
for (i in 3:5){
agri[,i] <- round(agri[,i]*100,digits=2)
}
agri <- agri[,c(1:5)]
# at the state level
agri <- svyby(~f_ag+f_al+f_cl, ~state.id+migranthh.labor, nss,na.rm = TRUE, svymean)
for (i in 3:5){
agri[,i] <- round(agri[,i]*100,digits=2)
}
agri <- agri[,c(1:5)]
library(reshape2)
dcast(melt(agri), state ~ migranthh.labor + variable)
te <- dcast(melt(agri), state.id ~ migranthh.labor + variable)
te <- dcast(melt(agri), state.id ~ migranthh.labor + variable)
colnames(agri)
te <- dcast(melt(agri), state.id ~ migranthh.labor + variable)
te <- dcast(melt(agri, id.vars=c("state.id","migranthh.labor")), state.id ~ migranthh.labor + variable)
View(te)
agri2 <- dcast(melt(agri, id.vars=c("state.id","migranthh.labor")), state.id ~ migranthh.labor + variable)
agri2 <- agri2[,c(1,2,5,3,6,4,7)]
View(agri2)
agri2 <- merge(agri2,statekeys01,by="state.id",all.x=T)
View(agri2)
agri2 <- dcast(melt(agri, id.vars=c("state.id","migranthh.labor")), state.id ~ migranthh.labor + variable)
agri2 <- merge(agri2,statekeys01,by="state.id",all.x=T)
agri2 <- agri2[,c(8,2,5,3,6,4,7)]
agri2 <- agri2[order(agri2$state),]
addtorow <- list()
addtorow$pos <- list(0)
addtorow <- list()
addtorow$pos <- list(0, 0)
addtorow$command <- c("State & \\multicolumn{2}{c}{Any Agriculture} & \\multicolumn{2}{|c}{Agricultural Laborers} & \\multicolumn{2}{|c}{Cutivators} \\\\\n",
"Non-Migrant & Migrant & Non-Migrant & Migrant & Non-Migrant & Migrant  \\\\\n")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State",align="llrrrrrr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
addtorow$command <- c("State & \\multicolumn{2}{c}{Any Agriculture} & \\multicolumn{2}{|c}{Agricultural Laborers} & \\multicolumn{2}{|c}{Cutivators} \\\\\n",
" & |Non-Migrant & Migrant & |Non-Migrant & Migrant & |Non-Migrant & Migrant  \\\\\n")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
addtorow$command <- c("State & \\multicolumn{2}{c}{Any Agriculture} & \\multicolumn{2}{|c}{Agricultural Laborers} & \\multicolumn{2}{|c}{Cutivators} \\\\\n",
" & Non-Migrant & Migrant & Non-Migrant & Migrant & Non-Migrant & Migrant  \\\\\n")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
addtorow$command <- c("State & \\multicolumn{2}{c}{Any Agriculture} & \\multicolumn{2}{c}{Agricultural Laborers} & \\multicolumn{2}{c}{Cutivators} \\\\\n",
" & Non-Migrant & Migrant & Non-Migrant & Migrant & Non-Migrant & Migrant  \\\\\n")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
addtorow$command <- c("State & \\multicolumn{2}{c}{Any Agriculture} & \\multicolumn{2}{|c}{Agricultural Laborers} & \\multicolumn{2}{|c}{Cutivators} \\\\\n",
" & Non-Migrant & Migrant & Non-Migrant & Migrant & Non-Migrant & Migrant  \\\\\n")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
agri2 <- agri2[agri2$state %in% ac.regional$state,]
View(agri2)
addtorow <- list()
addtorow$pos <- list(0, 0)
addtorow$command <- c("State & \\multicolumn{2}{c}{Any Agriculture} & \\multicolumn{2}{|c}{Agricultural Laborers} & \\multicolumn{2}{|c}{Cutivators} \\\\\n",
" & Non-Migrant & Migrant & Non-Migrant & Migrant & Non-Migrant & Migrant  \\\\\n")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State and Migrant Status",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
addtorow$command <- c("State & \\multicolumn{2}{c}{Any Agriculture} & \\multicolumn{2}{|c}{Agricultural Laborers} & \\multicolumn{2}{|c}{Cultivators} \\\\\n",
" & Non-Migrant & Migrant & Non-Migrant & Migrant & Non-Migrant & Migrant  \\\\\n")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State and Migrant Status",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
agr1 <- svyby(tot_al+al_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
agr2 <- svyby(tot_cl+cl_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
f_activities <- aggregate(cbind(N,AL,CL,familyfarm,agriculture) ~ key_hhold,women64[women64$female==1,],sum)
m_activities <- aggregate(cbind(N,AL,CL,familyfarm,agriculture) ~ key_hhold,women64[women64$female==0,],sum)
t_activities <- merge(f_activities,m_activities,by="key_hhold",all=T)
t_activities[is.na(t_activities)] <- 0
t_activities$al_n_f <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x,NA)
t_activities$cl_n_f <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x,NA)
t_activities$ff_n_f <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x,NA)
t_activities$ag_n_f <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x,NA)
t_activities$tot_al <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x+t_activities$AL.y,NA)
t_activities$tot_cl <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x+t_activities$CL.y,NA)
t_activities$tot_ff <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x+t_activities$familyfarm.y,NA)
t_activities$tot_ag <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x+t_activities$agriculture.y,NA)
colnames(t_activities)[1] <- "Key_hhold"
al_f <- as.numeric(f_activities$key_hhold[f_activities$AL>0])
cl_f <- as.numeric(f_activities$key_hhold[f_activities$CL>0])
ff_f <- as.numeric(f_activities$key_hhold[f_activities$familyfarm>0])
ag_f <- as.numeric(f_activities$key_hhold[f_activities$agriculture>0])
# check whether women are more likely to participate in agri
nss64$f_al <- ifelse(nss64$Key_hhold %in% al_f,1,0)
nss64$f_cl <- ifelse(nss64$Key_hhold %in% cl_f,1,0)
nss64$f_ff <- ifelse(nss64$Key_hhold %in% ff_f,1,0)
nss64$f_ag <- ifelse(nss64$Key_hhold %in% ag_f,1,0)
nss <- svydesign(id = ~Key_hhold,
weights = ~wgt_combined,
strata=~Stratum,
data = nss64)
agr1 <- svyby(tot_al+al_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
t_activities$tot_al <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x+t_activities$AL.y,NA)
t_activities$tot_cl <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x+t_activities$CL.y,NA)
t_activities$tot_ff <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x+t_activities$familyfarm.y,NA)
t_activities$tot_ag <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x+t_activities$agriculture.y,NA)
colnames(t_activities)[1] <- "Key_hhold"
nss64 <- readRDS("nss64migration.rds")
# check whether women are more likely to participate in agri
nss64$f_al <- ifelse(nss64$Key_hhold %in% al_f,1,0)
nss64$f_cl <- ifelse(nss64$Key_hhold %in% cl_f,1,0)
nss64$f_ff <- ifelse(nss64$Key_hhold %in% ff_f,1,0)
nss64$f_ag <- ifelse(nss64$Key_hhold %in% ag_f,1,0)
#for hh with at least 1 person in agriculture
nss64 <- merge(nss64,t_activities[,c(1,12:length(t_activities))],by="Key_hhold",all=T)
nss <- svydesign(id = ~Key_hhold,
weights = ~wgt_combined,
strata=~Stratum,
data = nss64)
agr <- svyby(~al_n_f+cl_n_f+ff_n_f+ag_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
agr1 <- svyby(tot_al+al_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
agr2 <- svyby(tot_cl+cl_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
agr3 <- svyby(tot_ff+ff_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
agr4 <- svyby(tot_ag+ag_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
View(nss64)
women64 <- read.dta("C:/Users/franz/Dropbox/PhD/Dissertation/Turnout Data/0 - other data/Migration/NSS/NSS64 Block-4-demographic-usual-activity-members-records.dta")
#check for migration status of HH
mhh.male <- c(as.numeric(nss64$Key_hhold[nss64$migranthh.male==1]))
mhh.remittances <- c(as.numeric(nss64$Key_hhold[nss64$migranthh.remittances==1]))
mhh.excessmales <- c(as.numeric(nss64$Key_hhold[nss64$migranthh.excessmales==1]))
mhh.labor <- c(as.numeric(nss64$Key_hhold[nss64$migranthh.labor==1]))
mhh.excessmalelaborers <- c(as.numeric(nss64$Key_hhold[nss64$migranthh.excessmalelaborers==1]))
mhh.leftstate <- c(as.numeric(nss64$Key_hhold[nss64$migranthh.leftstate==1]))
#migrant status of HH
women64$migranthh.male <- ifelse(women64$key_hhold %in% mhh.male,1,0)
women64$migranthh.excessmales <- ifelse(women64$key_hhold %in% mhh.excessmales,1,0)
women64$migranthh.labor <- ifelse(women64$key_hhold %in% mhh.labor,1,0)
women64$migranthh.excessmalelaborers <- ifelse(women64$key_hhold %in% mhh.excessmalelaborers,1,0)
women64$migranthh.leftstate <- ifelse(women64$key_hhold %in% mhh.leftstate,1,0)
women64$migranthh.remittances <- ifelse(women64$key_hhold %in% mhh.remittances,1,0)
#occupation/activity status of woman
women64$housewife <- ifelse(women64$B4_c9=="92",1,0)
women64$housewifeplus <- ifelse(women64$B4_c9=="93",1,0)
women64$casuallabor <- ifelse(women64$B4_c9=="51",1,0)
women64$ownaccountworker <- ifelse(women64$B4_c9=="11",1,0)
women64$employee <- ifelse(women64$B4_c9=="31",1,0)
women64$publicworks <- ifelse(women64$B4_c9=="41",1,0)
women64$looking <- ifelse(women64$B4_c9=="81",1,0)
women64$studying <- ifelse(women64$B4_c9=="91",1,0)
women64$unpaidfamilywork <- ifelse(women64$B4_c9=="21",1,0)
#indicator of women working
women64$working <- 1
women64$working[women64$B4_c9=="92" | women64$B4_c9=="93" | women64$B4_c9=="94" | women64$B4_c9=="95" | women64$B4_c9=="21" | women64$B4_c9=="81" | women64$B4_c9=="91"] <- 0
table(women64$working)
women64$sector <- substr(women64$B4_c11, 1, 3)
women64$agriculture <- ifelse(women64$sector=="011" | women64$sector=="012" | women64$sector=="013" | women64$sector=="014" | women64$sector=="015",1,0)
women64$AL <- women64$casuallabor*women64$agriculture
women64$CL <- women64$ownaccountworker*women64$agriculture
women64$familyfarm <- women64$unpaidfamilywork*women64$agriculture
#other variables
women64$age <- as.numeric(women64$B4_c5)
women64$married <- ifelse(women64$B4_c6=="2",1,0)
women64$N <- 1
women64$female <- ifelse(women64$B4_c4=="2",1,0)
nssagain <- svydesign(id = ~key_hhold,
weights = ~wgt_combined,
strata=~Stratum,
data = women64)
#use only women, and only 18 and older
nssdat <- subset(nssagain,age>17)
nsswomen <- subset(nssdat,B4_c4=="2")
womenactivity <- svyby(~housewife+housewifeplus+casuallabor+AL+CL+familyfarm, ~migranthh.male, nsswomen,na.rm = TRUE, svymean)
womenactivity <- data.frame(t(womenactivity))
womenactivity <- round(womenactivity,digits=4)
f_activities <- aggregate(cbind(N,AL,CL,familyfarm,agriculture) ~ key_hhold,women64[women64$female==1,],sum)
m_activities <- aggregate(cbind(N,AL,CL,familyfarm,agriculture) ~ key_hhold,women64[women64$female==0,],sum)
t_activities <- merge(f_activities,m_activities,by="key_hhold",all=T)
t_activities[is.na(t_activities)] <- 0
t_activities$al_n_f <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x,NA)
t_activities$cl_n_f <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x,NA)
t_activities$ff_n_f <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x,NA)
t_activities$ag_n_f <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x,NA)
t_activities$tot_al <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x+t_activities$AL.y,NA)
t_activities$tot_cl <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x+t_activities$CL.y,NA)
t_activities$tot_ff <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x+t_activities$familyfarm.y,NA)
t_activities$tot_ag <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x+t_activities$agriculture.y,NA)
colnames(t_activities)[1] <- "Key_hhold"
View(t_activities)
t_activities <- merge(f_activities,m_activities,by="key_hhold",all=T)
t_activities[is.na(t_activities)] <- 0
t_activities$al_n_f <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x,NA)
t_activities$cl_n_f <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x,NA)
t_activities$ff_n_f <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x,NA)
t_activities$ag_n_f <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x,NA)
t_activities$tot_al <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x+t_activities$AL.y,NA)
t_activities$tot_cl <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x+t_activities$CL.y,NA)
t_activities$tot_ff <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x+t_activities$familyfarm.y,NA)
t_activities$tot_ag <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x+t_activities$agriculture.y,NA)
colnames(t_activities)[1] <- "Key_hhold"
al_f <- as.numeric(f_activities$key_hhold[f_activities$AL>0])
cl_f <- as.numeric(f_activities$key_hhold[f_activities$CL>0])
ff_f <- as.numeric(f_activities$key_hhold[f_activities$familyfarm>0])
nss64 <- readRDS("nss64migration.rds")
# check whether women are more likely to participate in agri
nss64$f_al <- ifelse(nss64$Key_hhold %in% al_f,1,0)
nss64$f_cl <- ifelse(nss64$Key_hhold %in% cl_f,1,0)
nss64$f_ff <- ifelse(nss64$Key_hhold %in% ff_f,1,0)
nss64$f_ag <- ifelse(nss64$Key_hhold %in% ag_f,1,0)
#for hh with at least 1 person in agriculture
nss64 <- merge(nss64,t_activities[,c(1,12:length(t_activities))],by="Key_hhold",all=T)
nss <- svydesign(id = ~Key_hhold,
weights = ~wgt_combined,
strata=~Stratum,
data = nss64)
agr1 <- svyby(~tot_ag+ag_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
View(agr1)
#share of HHs with at least 1 woman engaged in agriculture
agriculture <- svyby(~f_ag+f_al+f_cl, ~migranthh.labor, nss,na.rm = TRUE, svymean)
for (i in 2:4){
agriculture[,i] <- round(agriculture[,i]*100,digits=2)
}
agriculture <- data.frame(t(agriculture[,c(2:4)]))
#share of HHs with at least 1 woman engaged in agriculture
agriculture <- svyby(~f_ag+f_al+f_cl, ~migranthh.labor, nss,na.rm = TRUE, svymean)
for (i in 2:4){
agriculture[,i] <- round(agriculture[,i]*100,digits=2)
}
agriculture <- data.frame(t(agriculture[,c(2:4)]))
agriculture$vars <- c("Any Agriculture","Agricultural Laborer","Cultivator")
agriculture <- agriculture[,c(3,1,2)]
agriculture <- cbind(agriculture,pvs)
agr2 <- svyby(~tot_al+al_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
agr3 <- svyby(~tot_cl+cl_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
View(agr2)
View(agr3)
for (i in 2:3){
agr1[,i] <- round(agr1[,i]*100,digits=2)
}
ag1 <- data.frame(t(ag1))
ag1 <- data.frame(t(agr1))
View(ag1)
agr1 <- svyby(~tot_ag+ag_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
for (i in 2:3){
agr1[,i] <- round(agr1[,i]*100,digits=2)
}
ag1 <- data.frame(t(agr1[,c(1:3)]))
ag1 <- data.frame(t(agr1[,c(2:3)]))
agr1 <- svyby(~tot_ag+ag_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
for (i in 2:3){
agr1[,i] <- round(agr1[,i]*100,digits=2)
}
ag1 <- data.frame(t(agr1[,c(2:3)]))
agr1 <- svyby(~tot_ag+ag_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
ag1 <- data.frame(t(agr1[,c(2:3)]))
agr2 <- svyby(~tot_al+al_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
ag2 <- data.frame(t(agr2[,c(2:3)]))
ag3 <- data.frame(t(agr3[,c(2:3)]))
View(ag3)
View(ag2)
View(ag3)
ag <- rbind(ag1,ag2,ag3)
ag$var <- c("Avg Total N Agriculture","Avg N Women Agriculture","Avg Total N Laborers","Avg N Women Laborers","Avg Total N Cultivators","Avg N Women Cultivators")
View(ag)
ag <- ag[,c(3,1,2)]
ag$var <- c("Total N Agriculture","N Women Agriculture","Total N Laborers","N Women Laborers","Total N Cultivators","N Women Cultivators")
colnames(ag) <- c("HH Mean","Non-Migrant HHs","Migrant HHs")
rownames(ag) <- NULL
print(xtable(ag,caption="Table 9. Average Number of People Engaged in Agriculture per Agricultural Household",align="llrr"),caption.placement="top",table.placement="!htbp",booktab=T,include.rownames=F,file="agnssnational.tex")
View(nss64)
unique(nss64$labor)
View(labormigration)
#check for correlation between N male outmigrants and female agricultural workers
svyplot(~labor+ag_n_f, nss, style="bubble")
#check for correlation between N male outmigrants and female agricultural workers
summary(svyglm(ag_n_f~labor, design=nss, na.action = na.omit))
View(ac.regional)
length(nss64$Key_hhold[which(is.na(nss64$tot_ag)==F)])
length(nss64$Key_hhold[which(is.na(nss64$tot_ag)==F)])/125578
######
ihds <- readRDS("ihds.rds")
summary(ihds$WKFARM)
ihds$agri <- ifelse(as.numeric(ihds$WKFARM)>2,1,0)
stargazer(ac.regional[,c("gg","migranthh.male","migranthh.labor","migranthh.excessmales","migranthh.excessmalelaborers","expenditure","m_employmentrate", "urban","pct_f_working",
"sexratio","N.individuals", "share.muslim","share.other","share.sc", "share.st","share.obc")],
title = "Table 3. Summary Statistics",
type = "text", out = "migdescriptives.tex",
covariate.labels = c("Gender Turnout Gap","Share Male Migrant HHs","Share Male Labor Migrant HHs","Share Excess Male Migrants HHs","Share Excess Male Labor Migrants HHs","Avg. Monthly Expenditure (INR)","Male Employment Rate", "Share HHs Urban","FLFP Rate", "Sex Ratio","Population","Share HHs Muslim","Share HHs Other Religion","Share HHs SC", "Share HHs ST","Share HHs OBC"),
summary.stat = c("n", "mean", "sd", "min","max"),
float.env="sidewaystable",
align=TRUE, no.space = TRUE)
classroster <- read_csv("C:/Users/franz/Dropbox/PhD/TA/Spring 2021/class roster.csv")
View(classroster)
userlist <- classroster[,1]
View(userlist)
userlist <- aggregate(`Student ID` ~ 1,classroster,unique)
View(userlist)
userlist <- aggregate(`Student ID`,classroster,unique)
userlist <- paste0(classroster$`Student ID`, collapse=",")
userlist
nc <- 1136
meanwzscont <- -.0002863246
meanwzscont/sqrt(nc)
round(meanwzscont/sqrt(nc),2)
round(meanwzscont/sqrt(nc),8)
round(meanwzscont/sqrt(nc),6)
round(meanwzscont/sqrt(nc),4)
round(meanwzscont/sqrt(nc),digits=4)
round(meanwzscont/sqrt(nc),digits=5)
sqrt(.002419415^2+(meanwzscont/sqrt(nc))^2)
.1118683/.00241943
setwd("C:/Users/franz/Dropbox/850_Spring_2021/Course Materials/New Exams/Final")
# Import the data file
mto <- read.csv("mto.csv")
# Visualize
head(mto)
# Create the treatment variable
mto$treatment <- ifelse(mto$group ,= "control", 0, 1)
# Create the treatment variable
mto$treatment <- ifelse(mto$group <= "control", 0, 1)
summary(mto$treatment)
table(mto$group,mto$treatment)
pnorm((.11/.04))
.54/sqrt(968)
(.41(1-.41))/sqrt(968)
(.41*(1-.41))/sqrt(968)
.41-qnorm(.975)*((.41*(1-.41))/sqrt(968))
.41-(qnorm(.975)*((.41*(1-.41))/sqrt(968)))
1-.41
.59*.41
0.2419/sqrt(968)
.41-(qnorm(0.975)*0.00777496)
sqrt(.41*(1-.41))
sqrt(.41*(1-.41))/sqrt(968)
qnorm(.05/2,lower.tail=F)
qnorm(.025)
qnorm(.976)
qnorm(.975)
qnorm(.025)
qnorm(.025,lower.tail=F)
# Insert your code here
mto <- read.csv("C:/Users/franz/Dropbox/850_Spring_2021/Course Materials/New Exams/Final/mto.csv")
# Insert your code here
mto <- read.csv("C:/Users/franz/Dropbox/850_Spring_2021/Course Materials/New Exams/Final/mto.csv")
head(mto)
mto$treatment <- ifelse(mto$group == "lpv","0","1" ) #creating variable in dataframe
treatment <- subset(mto, treatment == "0") #subsetting
control <- subset(mto, treatment == "1")
wellcontrol <- mean(control$wellbeing_zscore) #creating vector of mean
welltreatment <- mean(treatment$wellbeing_zscore)
wellcontrol
welltreatment
diff.means <- welltreatment - wellcontrol # difference in means
diff.means
se.control <-1/sqrt(1808)
se.treatment <-1/sqrt(1455)
se.diff.means <- sqrt(1/1808 + 1/1455)
t.test(control$wellbeing_zscore, treatment$wellbeing_zscore)
se.mean <- 0.54/sqrt(986)
ci.95 <- c(0.41- 1.96 * se.mean,
0.41 + 1.96 * se.mean)
ci.95
df <- read.csv("C:/Users/franz/Dropbox/850_Spring_2021/Course Materials/New Exams/Final/yu2017sample_short.csv") # Insert your code here
table(df$year)
df2007 <- subset(df, year == "2007")
regres <- lm(wage ~ numChildren, data = df)
summary(regres)
regres2 <- lm(wage ~ numChildren + educ + marstat + unionized, data = df)
summary(regres2)

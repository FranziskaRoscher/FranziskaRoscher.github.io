" & Non-Migrant & Migrant & Non-Migrant & Migrant & Non-Migrant & Migrant  \\\\\n")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
addtorow$command <- c("State & \\multicolumn{2}{c}{Any Agriculture} & \\multicolumn{2}{|c}{Agricultural Laborers} & \\multicolumn{2}{|c}{Cutivators} \\\\\n",
" & Non-Migrant & Migrant & Non-Migrant & Migrant & Non-Migrant & Migrant  \\\\\n")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
agri2 <- agri2[agri2$state %in% ac.regional$state,]
View(agri2)
addtorow <- list()
addtorow$pos <- list(0, 0)
addtorow$command <- c("State & \\multicolumn{2}{c}{Any Agriculture} & \\multicolumn{2}{|c}{Agricultural Laborers} & \\multicolumn{2}{|c}{Cutivators} \\\\\n",
" & Non-Migrant & Migrant & Non-Migrant & Migrant & Non-Migrant & Migrant  \\\\\n")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State and Migrant Status",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
addtorow$command <- c("State & \\multicolumn{2}{c}{Any Agriculture} & \\multicolumn{2}{|c}{Agricultural Laborers} & \\multicolumn{2}{|c}{Cultivators} \\\\\n",
" & Non-Migrant & Migrant & Non-Migrant & Migrant & Non-Migrant & Migrant  \\\\\n")
print(xtable(agri2,caption="Table A5. Share of Households with at Least 1 Woman Engaged in Agriculture, by State and Migrant Status",align="ll|rr|rr|rr"),caption.placement="top",table.placement="!htbp",booktab=T,add.to.row=addtorow,include.rownames=F,include.colnames=F,file="agrinssstatelevel.tex")
agr1 <- svyby(tot_al+al_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
agr2 <- svyby(tot_cl+cl_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
f_activities <- aggregate(cbind(N,AL,CL,familyfarm,agriculture) ~ key_hhold,women64[women64$female==1,],sum)
m_activities <- aggregate(cbind(N,AL,CL,familyfarm,agriculture) ~ key_hhold,women64[women64$female==0,],sum)
t_activities <- merge(f_activities,m_activities,by="key_hhold",all=T)
t_activities[is.na(t_activities)] <- 0
t_activities$al_n_f <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x,NA)
t_activities$cl_n_f <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x,NA)
t_activities$ff_n_f <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x,NA)
t_activities$ag_n_f <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x,NA)
t_activities$tot_al <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x+t_activities$AL.y,NA)
t_activities$tot_cl <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x+t_activities$CL.y,NA)
t_activities$tot_ff <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x+t_activities$familyfarm.y,NA)
t_activities$tot_ag <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x+t_activities$agriculture.y,NA)
colnames(t_activities)[1] <- "Key_hhold"
al_f <- as.numeric(f_activities$key_hhold[f_activities$AL>0])
cl_f <- as.numeric(f_activities$key_hhold[f_activities$CL>0])
ff_f <- as.numeric(f_activities$key_hhold[f_activities$familyfarm>0])
ag_f <- as.numeric(f_activities$key_hhold[f_activities$agriculture>0])
# check whether women are more likely to participate in agri
nss64$f_al <- ifelse(nss64$Key_hhold %in% al_f,1,0)
nss64$f_cl <- ifelse(nss64$Key_hhold %in% cl_f,1,0)
nss64$f_ff <- ifelse(nss64$Key_hhold %in% ff_f,1,0)
nss64$f_ag <- ifelse(nss64$Key_hhold %in% ag_f,1,0)
nss <- svydesign(id = ~Key_hhold,
weights = ~wgt_combined,
strata=~Stratum,
data = nss64)
agr1 <- svyby(tot_al+al_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
t_activities$tot_al <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x+t_activities$AL.y,NA)
t_activities$tot_cl <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x+t_activities$CL.y,NA)
t_activities$tot_ff <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x+t_activities$familyfarm.y,NA)
t_activities$tot_ag <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x+t_activities$agriculture.y,NA)
colnames(t_activities)[1] <- "Key_hhold"
nss64 <- readRDS("nss64migration.rds")
# check whether women are more likely to participate in agri
nss64$f_al <- ifelse(nss64$Key_hhold %in% al_f,1,0)
nss64$f_cl <- ifelse(nss64$Key_hhold %in% cl_f,1,0)
nss64$f_ff <- ifelse(nss64$Key_hhold %in% ff_f,1,0)
nss64$f_ag <- ifelse(nss64$Key_hhold %in% ag_f,1,0)
#for hh with at least 1 person in agriculture
nss64 <- merge(nss64,t_activities[,c(1,12:length(t_activities))],by="Key_hhold",all=T)
nss <- svydesign(id = ~Key_hhold,
weights = ~wgt_combined,
strata=~Stratum,
data = nss64)
agr <- svyby(~al_n_f+cl_n_f+ff_n_f+ag_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
agr1 <- svyby(tot_al+al_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
agr2 <- svyby(tot_cl+cl_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
agr3 <- svyby(tot_ff+ff_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
agr4 <- svyby(tot_ag+ag_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
View(nss64)
women64 <- read.dta("C:/Users/franz/Dropbox/PhD/Dissertation/Turnout Data/0 - other data/Migration/NSS/NSS64 Block-4-demographic-usual-activity-members-records.dta")
#check for migration status of HH
mhh.male <- c(as.numeric(nss64$Key_hhold[nss64$migranthh.male==1]))
mhh.remittances <- c(as.numeric(nss64$Key_hhold[nss64$migranthh.remittances==1]))
mhh.excessmales <- c(as.numeric(nss64$Key_hhold[nss64$migranthh.excessmales==1]))
mhh.labor <- c(as.numeric(nss64$Key_hhold[nss64$migranthh.labor==1]))
mhh.excessmalelaborers <- c(as.numeric(nss64$Key_hhold[nss64$migranthh.excessmalelaborers==1]))
mhh.leftstate <- c(as.numeric(nss64$Key_hhold[nss64$migranthh.leftstate==1]))
#migrant status of HH
women64$migranthh.male <- ifelse(women64$key_hhold %in% mhh.male,1,0)
women64$migranthh.excessmales <- ifelse(women64$key_hhold %in% mhh.excessmales,1,0)
women64$migranthh.labor <- ifelse(women64$key_hhold %in% mhh.labor,1,0)
women64$migranthh.excessmalelaborers <- ifelse(women64$key_hhold %in% mhh.excessmalelaborers,1,0)
women64$migranthh.leftstate <- ifelse(women64$key_hhold %in% mhh.leftstate,1,0)
women64$migranthh.remittances <- ifelse(women64$key_hhold %in% mhh.remittances,1,0)
#occupation/activity status of woman
women64$housewife <- ifelse(women64$B4_c9=="92",1,0)
women64$housewifeplus <- ifelse(women64$B4_c9=="93",1,0)
women64$casuallabor <- ifelse(women64$B4_c9=="51",1,0)
women64$ownaccountworker <- ifelse(women64$B4_c9=="11",1,0)
women64$employee <- ifelse(women64$B4_c9=="31",1,0)
women64$publicworks <- ifelse(women64$B4_c9=="41",1,0)
women64$looking <- ifelse(women64$B4_c9=="81",1,0)
women64$studying <- ifelse(women64$B4_c9=="91",1,0)
women64$unpaidfamilywork <- ifelse(women64$B4_c9=="21",1,0)
#indicator of women working
women64$working <- 1
women64$working[women64$B4_c9=="92" | women64$B4_c9=="93" | women64$B4_c9=="94" | women64$B4_c9=="95" | women64$B4_c9=="21" | women64$B4_c9=="81" | women64$B4_c9=="91"] <- 0
table(women64$working)
women64$sector <- substr(women64$B4_c11, 1, 3)
women64$agriculture <- ifelse(women64$sector=="011" | women64$sector=="012" | women64$sector=="013" | women64$sector=="014" | women64$sector=="015",1,0)
women64$AL <- women64$casuallabor*women64$agriculture
women64$CL <- women64$ownaccountworker*women64$agriculture
women64$familyfarm <- women64$unpaidfamilywork*women64$agriculture
#other variables
women64$age <- as.numeric(women64$B4_c5)
women64$married <- ifelse(women64$B4_c6=="2",1,0)
women64$N <- 1
women64$female <- ifelse(women64$B4_c4=="2",1,0)
nssagain <- svydesign(id = ~key_hhold,
weights = ~wgt_combined,
strata=~Stratum,
data = women64)
#use only women, and only 18 and older
nssdat <- subset(nssagain,age>17)
nsswomen <- subset(nssdat,B4_c4=="2")
womenactivity <- svyby(~housewife+housewifeplus+casuallabor+AL+CL+familyfarm, ~migranthh.male, nsswomen,na.rm = TRUE, svymean)
womenactivity <- data.frame(t(womenactivity))
womenactivity <- round(womenactivity,digits=4)
f_activities <- aggregate(cbind(N,AL,CL,familyfarm,agriculture) ~ key_hhold,women64[women64$female==1,],sum)
m_activities <- aggregate(cbind(N,AL,CL,familyfarm,agriculture) ~ key_hhold,women64[women64$female==0,],sum)
t_activities <- merge(f_activities,m_activities,by="key_hhold",all=T)
t_activities[is.na(t_activities)] <- 0
t_activities$al_n_f <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x,NA)
t_activities$cl_n_f <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x,NA)
t_activities$ff_n_f <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x,NA)
t_activities$ag_n_f <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x,NA)
t_activities$tot_al <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x+t_activities$AL.y,NA)
t_activities$tot_cl <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x+t_activities$CL.y,NA)
t_activities$tot_ff <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x+t_activities$familyfarm.y,NA)
t_activities$tot_ag <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x+t_activities$agriculture.y,NA)
colnames(t_activities)[1] <- "Key_hhold"
View(t_activities)
t_activities <- merge(f_activities,m_activities,by="key_hhold",all=T)
t_activities[is.na(t_activities)] <- 0
t_activities$al_n_f <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x,NA)
t_activities$cl_n_f <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x,NA)
t_activities$ff_n_f <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x,NA)
t_activities$ag_n_f <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x,NA)
t_activities$tot_al <- ifelse(t_activities$AL.x+t_activities$AL.y>0,t_activities$AL.x+t_activities$AL.y,NA)
t_activities$tot_cl <- ifelse(t_activities$CL.x+t_activities$CL.y>0,t_activities$CL.x+t_activities$CL.y,NA)
t_activities$tot_ff <- ifelse(t_activities$familyfarm.x+t_activities$familyfarm.y>0,t_activities$familyfarm.x+t_activities$familyfarm.y,NA)
t_activities$tot_ag <- ifelse(t_activities$agriculture.x+t_activities$agriculture.y>0,t_activities$agriculture.x+t_activities$agriculture.y,NA)
colnames(t_activities)[1] <- "Key_hhold"
al_f <- as.numeric(f_activities$key_hhold[f_activities$AL>0])
cl_f <- as.numeric(f_activities$key_hhold[f_activities$CL>0])
ff_f <- as.numeric(f_activities$key_hhold[f_activities$familyfarm>0])
nss64 <- readRDS("nss64migration.rds")
# check whether women are more likely to participate in agri
nss64$f_al <- ifelse(nss64$Key_hhold %in% al_f,1,0)
nss64$f_cl <- ifelse(nss64$Key_hhold %in% cl_f,1,0)
nss64$f_ff <- ifelse(nss64$Key_hhold %in% ff_f,1,0)
nss64$f_ag <- ifelse(nss64$Key_hhold %in% ag_f,1,0)
#for hh with at least 1 person in agriculture
nss64 <- merge(nss64,t_activities[,c(1,12:length(t_activities))],by="Key_hhold",all=T)
nss <- svydesign(id = ~Key_hhold,
weights = ~wgt_combined,
strata=~Stratum,
data = nss64)
agr1 <- svyby(~tot_ag+ag_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
View(agr1)
#share of HHs with at least 1 woman engaged in agriculture
agriculture <- svyby(~f_ag+f_al+f_cl, ~migranthh.labor, nss,na.rm = TRUE, svymean)
for (i in 2:4){
agriculture[,i] <- round(agriculture[,i]*100,digits=2)
}
agriculture <- data.frame(t(agriculture[,c(2:4)]))
#share of HHs with at least 1 woman engaged in agriculture
agriculture <- svyby(~f_ag+f_al+f_cl, ~migranthh.labor, nss,na.rm = TRUE, svymean)
for (i in 2:4){
agriculture[,i] <- round(agriculture[,i]*100,digits=2)
}
agriculture <- data.frame(t(agriculture[,c(2:4)]))
agriculture$vars <- c("Any Agriculture","Agricultural Laborer","Cultivator")
agriculture <- agriculture[,c(3,1,2)]
agriculture <- cbind(agriculture,pvs)
agr2 <- svyby(~tot_al+al_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
agr3 <- svyby(~tot_cl+cl_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
View(agr2)
View(agr3)
for (i in 2:3){
agr1[,i] <- round(agr1[,i]*100,digits=2)
}
ag1 <- data.frame(t(ag1))
ag1 <- data.frame(t(agr1))
View(ag1)
agr1 <- svyby(~tot_ag+ag_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
for (i in 2:3){
agr1[,i] <- round(agr1[,i]*100,digits=2)
}
ag1 <- data.frame(t(agr1[,c(1:3)]))
ag1 <- data.frame(t(agr1[,c(2:3)]))
agr1 <- svyby(~tot_ag+ag_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
for (i in 2:3){
agr1[,i] <- round(agr1[,i]*100,digits=2)
}
ag1 <- data.frame(t(agr1[,c(2:3)]))
agr1 <- svyby(~tot_ag+ag_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
ag1 <- data.frame(t(agr1[,c(2:3)]))
agr2 <- svyby(~tot_al+al_n_f, ~migranthh.labor,nss,na.rm=T,svymean)
ag2 <- data.frame(t(agr2[,c(2:3)]))
ag3 <- data.frame(t(agr3[,c(2:3)]))
View(ag3)
View(ag2)
View(ag3)
ag <- rbind(ag1,ag2,ag3)
ag$var <- c("Avg Total N Agriculture","Avg N Women Agriculture","Avg Total N Laborers","Avg N Women Laborers","Avg Total N Cultivators","Avg N Women Cultivators")
View(ag)
ag <- ag[,c(3,1,2)]
ag$var <- c("Total N Agriculture","N Women Agriculture","Total N Laborers","N Women Laborers","Total N Cultivators","N Women Cultivators")
colnames(ag) <- c("HH Mean","Non-Migrant HHs","Migrant HHs")
rownames(ag) <- NULL
print(xtable(ag,caption="Table 9. Average Number of People Engaged in Agriculture per Agricultural Household",align="llrr"),caption.placement="top",table.placement="!htbp",booktab=T,include.rownames=F,file="agnssnational.tex")
View(nss64)
unique(nss64$labor)
View(labormigration)
#check for correlation between N male outmigrants and female agricultural workers
svyplot(~labor+ag_n_f, nss, style="bubble")
#check for correlation between N male outmigrants and female agricultural workers
summary(svyglm(ag_n_f~labor, design=nss, na.action = na.omit))
View(ac.regional)
length(nss64$Key_hhold[which(is.na(nss64$tot_ag)==F)])
length(nss64$Key_hhold[which(is.na(nss64$tot_ag)==F)])/125578
######
ihds <- readRDS("ihds.rds")
summary(ihds$WKFARM)
ihds$agri <- ifelse(as.numeric(ihds$WKFARM)>2,1,0)
stargazer(ac.regional[,c("gg","migranthh.male","migranthh.labor","migranthh.excessmales","migranthh.excessmalelaborers","expenditure","m_employmentrate", "urban","pct_f_working",
"sexratio","N.individuals", "share.muslim","share.other","share.sc", "share.st","share.obc")],
title = "Table 3. Summary Statistics",
type = "text", out = "migdescriptives.tex",
covariate.labels = c("Gender Turnout Gap","Share Male Migrant HHs","Share Male Labor Migrant HHs","Share Excess Male Migrants HHs","Share Excess Male Labor Migrants HHs","Avg. Monthly Expenditure (INR)","Male Employment Rate", "Share HHs Urban","FLFP Rate", "Sex Ratio","Population","Share HHs Muslim","Share HHs Other Religion","Share HHs SC", "Share HHs ST","Share HHs OBC"),
summary.stat = c("n", "mean", "sd", "min","max"),
float.env="sidewaystable",
align=TRUE, no.space = TRUE)
classroster <- read_csv("C:/Users/franz/Dropbox/PhD/TA/Spring 2021/class roster.csv")
View(classroster)
userlist <- classroster[,1]
View(userlist)
userlist <- aggregate(`Student ID` ~ 1,classroster,unique)
View(userlist)
userlist <- aggregate(`Student ID`,classroster,unique)
userlist <- paste0(classroster$`Student ID`, collapse=",")
userlist
nc <- 1136
meanwzscont <- -.0002863246
meanwzscont/sqrt(nc)
round(meanwzscont/sqrt(nc),2)
round(meanwzscont/sqrt(nc),8)
round(meanwzscont/sqrt(nc),6)
round(meanwzscont/sqrt(nc),4)
round(meanwzscont/sqrt(nc),digits=4)
round(meanwzscont/sqrt(nc),digits=5)
sqrt(.002419415^2+(meanwzscont/sqrt(nc))^2)
.1118683/.00241943
setwd("C:/Users/franz/Dropbox/850_Spring_2021/Course Materials/New Exams/Final")
# Import the data file
mto <- read.csv("mto.csv")
# Visualize
head(mto)
# Create the treatment variable
mto$treatment <- ifelse(mto$group ,= "control", 0, 1)
# Create the treatment variable
mto$treatment <- ifelse(mto$group <= "control", 0, 1)
summary(mto$treatment)
table(mto$group,mto$treatment)
pnorm((.11/.04))
.54/sqrt(968)
(.41(1-.41))/sqrt(968)
(.41*(1-.41))/sqrt(968)
.41-qnorm(.975)*((.41*(1-.41))/sqrt(968))
.41-(qnorm(.975)*((.41*(1-.41))/sqrt(968)))
1-.41
.59*.41
0.2419/sqrt(968)
.41-(qnorm(0.975)*0.00777496)
sqrt(.41*(1-.41))
sqrt(.41*(1-.41))/sqrt(968)
qnorm(.05/2,lower.tail=F)
qnorm(.025)
qnorm(.976)
qnorm(.975)
qnorm(.025)
qnorm(.025,lower.tail=F)
# Insert your code here
mto <- read.csv("C:/Users/franz/Dropbox/850_Spring_2021/Course Materials/New Exams/Final/mto.csv")
# Insert your code here
mto <- read.csv("C:/Users/franz/Dropbox/850_Spring_2021/Course Materials/New Exams/Final/mto.csv")
head(mto)
mto$treatment <- ifelse(mto$group == "lpv","0","1" ) #creating variable in dataframe
treatment <- subset(mto, treatment == "0") #subsetting
control <- subset(mto, treatment == "1")
wellcontrol <- mean(control$wellbeing_zscore) #creating vector of mean
welltreatment <- mean(treatment$wellbeing_zscore)
wellcontrol
welltreatment
diff.means <- welltreatment - wellcontrol # difference in means
diff.means
se.control <-1/sqrt(1808)
se.treatment <-1/sqrt(1455)
se.diff.means <- sqrt(1/1808 + 1/1455)
t.test(control$wellbeing_zscore, treatment$wellbeing_zscore)
se.mean <- 0.54/sqrt(986)
ci.95 <- c(0.41- 1.96 * se.mean,
0.41 + 1.96 * se.mean)
ci.95
df <- read.csv("C:/Users/franz/Dropbox/850_Spring_2021/Course Materials/New Exams/Final/yu2017sample_short.csv") # Insert your code here
table(df$year)
df2007 <- subset(df, year == "2007")
regres <- lm(wage ~ numChildren, data = df)
summary(regres)
regres2 <- lm(wage ~ numChildren + educ + marstat + unionized, data = df)
summary(regres2)
library(raster)
library(raster)
library(ggplot2)
library(tidyverse)
library(plotly)
library(ggplot2)
library(tidyverse)
library(plotly)
library(grid)
library(gridExtra)
statemap <- getData('GADM', country='IND', level=1)
colnames(statemap@data)[4] <- "state"
#rename some states
statemap@data$state[statemap@data$state=="Jammu and Kashmir"] <- "Jammu & Kashmir"
statemap@data$state[statemap@data$state=="NCT of Delhi"] <- "Delhi"
statemap@data$state[statemap@data$state=="Odisha"] <- "Orissa"
statemap@data$state[statemap@data$state=="Andaman and Nicobar"] <- "Andaman & Nicobar Islands"
statemap@data$state[statemap@data$state=="Dadra and Nagar Haveli"] <- "Dadra & Nagar Haveli"
statemap@data$state[statemap@data$state=="Daman and Diu"] <- "Daman & Diu"
statemap <- fortify(statemap,region="state")
statemap <- fortify(statemap,region="state")
colnames(statemap)[6] <- "state"
statemap <- statemap[order(statemap$group,statemap$order),]
statemap$state <- str_squish(statemap$state)
LS <- readRDS("C:/Users/franz/Dropbox/PhD/Dissertation/Turnout Data/0 - Lok Sabha/PC-level turnout data/LSbystate.rds")
LS$state <- str_squish(LS$state)
View(LS)
LS <- readRDS("C:/Users/franz/Dropbox/PhD/Dissertation/Turnout Data/0 - Lok Sabha/PC-level turnout data/LSbystate.rds") %>%
mutate(state=str_squish(state))
LS.map <- ggplot() +
geom_polygon(data = LS %>% filter(year %in% c(2004,2019)),
aes(x = long, y = lat, fill=gg,group = group),
color = 'gray',  size = .2) +
facet_wrap(~year) +
xlab("") +
ylab("") +
ggtitle("Gender Gap in Turnout in India, by State") +
scale_fill_gradient2(limits=c(-20,20),
midpoint = 0, low = "darkgreen", mid = "yellow", high = "red",
na.value = "grey50",
name="Gender Gap (ppt)") +
theme_classic() +
theme(axis.text=element_blank(),axis.ticks=element_blank(),axis.line=element_blank(),legend.position="bottom",
plot.title = element_text(size=20, face = "bold"),
legend.title=element_text(size=18),
legend.text=element_text(size=13)) +
coord_fixed()
LS.map
thestatemap <- full_join(statemap,LS,by="state")
View(thestatemap)
thestatemap <- full_join(statemap,LS %>% filter(year %in% c(2004,2019)),by="state")
LS.map <- ggplot() +
geom_polygon(data = thestatemap,
aes(x = long, y = lat, fill=gg,group = group),
color = 'gray',  size = .2) +
facet_wrap(~year) +
xlab("") +
ylab("") +
ggtitle("Gender Gap in Turnout in India, by State") +
scale_fill_gradient2(limits=c(-20,20),
midpoint = 0, low = "darkgreen", mid = "yellow", high = "red",
na.value = "grey50",
name="Gender Gap (ppt)") +
theme_classic() +
theme(axis.text=element_blank(),axis.ticks=element_blank(),axis.line=element_blank(),legend.position="bottom",
plot.title = element_text(size=20, face = "bold"),
legend.title=element_text(size=18),
legend.text=element_text(size=13)) +
coord_fixed()
LS.map
ggplot() +
geom_polygon(data = thestatemap,
aes(x = long, y = lat, fill=gg,group = group),
color = 'gray',  size = .2) +
facet_wrap(~year) +
xlab("") +
ylab("") +
ggtitle("Gender Gap in Turnout in India, by State") +
scale_fill_gradient2(limits=c(-20,20),
midpoint = 0, low = "darkgreen", mid = "yellow", high = "red",
na.value = "grey50",
name="Gender Gap (ppt)") +
theme_classic() +
theme(axis.text=element_blank(),axis.ticks=element_blank(),axis.line=element_blank(),legend.position="bottom",
plot.title = element_text(size=20, face = "bold"),
legend.title=element_text(size=18),
legend.text=element_text(size=13)) +
coord_fixed()
LS <- readRDS("C:/Users/franz/Dropbox/PhD/Dissertation/Turnout Data/0 - Lok Sabha/PC-level turnout data/LSbystate.rds") %>%
mutate(state=str_squish(state)) %>%
filter(year %in% c(2004,2019)) %>%
bind_rows(LS %>%
filter(year==2004 & state=="Andhra Pradesh") %>%
mutate(state=="Telangana"))
thestatemap <- full_join(statemap,LS,by="state")
ggplot() +
geom_polygon(data = thestatemap,
aes(x = long, y = lat, fill=gg,group = group),
color = 'gray',  size = .2) +
facet_wrap(~year) +
xlab("") +
ylab("") +
ggtitle("Gender Gap in Turnout in India, by State") +
scale_fill_gradient2(limits=c(-20,20),
midpoint = 0, low = "darkgreen", mid = "yellow", high = "red",
na.value = "grey50",
name="Gender Gap (ppt)") +
theme_classic() +
theme(axis.text=element_blank(),axis.ticks=element_blank(),axis.line=element_blank(),legend.position="bottom",
plot.title = element_text(size=20, face = "bold"),
legend.title=element_text(size=18),
legend.text=element_text(size=13)) +
coord_fixed()
View(LS)
LS <- readRDS("C:/Users/franz/Dropbox/PhD/Dissertation/Turnout Data/0 - Lok Sabha/PC-level turnout data/LSbystate.rds") %>%
mutate(state=str_squish(state)) %>%
filter(year %in% c(2004,2019)) %>%
bind_rows(LS %>%
filter(year==2004 & state=="Andhra Pradesh") %>%
mutate(state="Telangana"))
thestatemap <- full_join(statemap,LS,by="state")
ggplot() +
geom_polygon(data = thestatemap,
aes(x = long, y = lat, fill=gg,group = group),
color = 'gray',  size = .2) +
facet_wrap(~year) +
xlab("") +
ylab("") +
ggtitle("Gender Gap in Turnout in India, by State") +
scale_fill_gradient2(limits=c(-20,20),
midpoint = 0, low = "darkgreen", mid = "yellow", high = "red",
na.value = "grey50",
name="Gender Gap (ppt)") +
theme_classic() +
theme(axis.text=element_blank(),axis.ticks=element_blank(),axis.line=element_blank(),legend.position="bottom",
plot.title = element_text(size=20, face = "bold"),
legend.title=element_text(size=18),
legend.text=element_text(size=13)) +
coord_fixed()
ggplot(LSbystate, aes(x=year)) +
ggtitle("Number of Registered Voters in India") +
geom_line(aes(y=f_electors/1000000, color="Female"), size=1) +
geom_point(aes(y=f_electors/1000000, color="Female"), size=1.5) +
geom_line(aes(y=m_electors/1000000, color="Male"), size=1) +
geom_point(aes(y=m_electors/1000000, color="Male"), size=1.5) +
scale_x_continuous(limits=c(1970,2020),breaks=unique(LSbystate$year)) +
scale_color_manual(values = c("red","blue")) +
labs(colour="Gender") +
xlab("Year") +
ylab("Registered Voters (in mln)") +
theme_classic()+
theme(legend.position = "bottom",
axis.text.x=element_text(angle = 45, hjust = 1),
plot.title = element_text(size=20, face = "bold"),
strip.text = element_text(size=18),
legend.title=element_text(size=18),
legend.text=element_text(size=13))
LSbystate <- readRDS("C:/Users/franz/Dropbox/PhD/Dissertation/Turnout Data/0 - Lok Sabha/PC-level turnout data/LSbystate.rds") %>%
#fix 1985 and 1992 later elections
mutate(year=ifelse(year==1985,1984,year),
year=ifelse(year==1992,1991,year)) %>%
group_by(year) %>%
summarise(f_electors=sum(f_electors),
m_electors=sum(m_electors))
ggplot(LSbystate, aes(x=year)) +
ggtitle("Number of Registered Voters in India") +
geom_line(aes(y=f_electors/1000000, color="Female"), size=1) +
geom_point(aes(y=f_electors/1000000, color="Female"), size=1.5) +
geom_line(aes(y=m_electors/1000000, color="Male"), size=1) +
geom_point(aes(y=m_electors/1000000, color="Male"), size=1.5) +
scale_x_continuous(limits=c(1970,2020),breaks=unique(LSbystate$year)) +
scale_color_manual(values = c("red","blue")) +
labs(colour="Gender") +
xlab("Year") +
ylab("Registered Voters (in mln)") +
theme_classic()+
theme(legend.position = "bottom",
axis.text.x=element_text(angle = 45, hjust = 1),
plot.title = element_text(size=20, face = "bold"),
strip.text = element_text(size=18),
legend.title=element_text(size=18),
legend.text=element_text(size=13))
ggplot() +
geom_polygon(data = thestatemap,
aes(x = long, y = lat, fill=gg,group = group),
color = 'gray',  size = .2) +
facet_wrap(~year) +
xlab("") +
ylab("") +
ggtitle("Gender Gap in Turnout in India, by State") +
scale_fill_gradient2(limits=c(-20,20),
midpoint = 0, low = "darkgreen", mid = "yellow", high = "red",
na.value = "grey50",
name="Gender Gap (ppt)") +
theme_classic() +
theme(axis.text=element_blank(),axis.ticks=element_blank(),axis.line=element_blank(),legend.position="bottom",
plot.title = element_text(size=20, face = "bold"),
strip.text = element_text(size=18),
legend.title=element_text(size=18),
legend.text=element_text(size=13)) +
coord_fixed()
